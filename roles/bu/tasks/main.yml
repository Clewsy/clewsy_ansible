---
- name: Ensure bin directory exists within user's home directory.
  file:
    dest: "/home/{{ ansible_user }}/bin"
    mode: 0755
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    state: directory

- name: Copy bu.sh script to user's bin directory.
  get_url:
    url: "{{ bu_script_url }}"
    dest: "/home/{{ ansible_user }}/bin/bu.sh"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: 0755

- name: Copy host-specific backup list (bu.list) to /home/{{ ansible_user }}/bin.
  copy:
    src: "files/bu.list_{{ host_name }}"
    dest: "/home/{{ ansible_user }}/bin/bu.list"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: 0644