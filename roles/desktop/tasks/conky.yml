---
- name: '[conky] Load conky variables.'
  include_vars: conky_vars.yml

- name: '[conky] Install conky.'
  apt:
    name: conky
    state: latest

- name: '[conky] Copy conky configuration file.'
  get_url:
    url: "{{ conky_config_url }}"
    dest: "{{ ansible_user_home_dir }}/.conkyrc"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: '0640'

- name: '[conky] Ensure autostart directory exists.'
  file:
    dest: "{{ ansible_user_home_dir }}/.config/autostart"
    mode: '0755'
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    state: directory
