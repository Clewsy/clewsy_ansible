---
- name: '[guake] Install guake.'
  apt:
    name: guake
    state: latest

- name: '[guake] Ensure autostart directory exists.'
  file:
    dest: "{{ ansible_user_home_dir }}/.config/autostart"
    mode: '0755'
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    state: directory

- name: '[guake] Create autostart entry.'
  copy:
    content: |
      [Desktop Entry]
      Name=Guake Terminal
      Comment=Use the command line in a Quake-like terminal.  Autostart config generated by ansible.
      TryExec=guake
      Exec=guake
      Icon=guake
      Type=Application
      Categories=GNOME;GTK;System;Utility;TerminalEmulator;
      StartupNotify=true
      X-Desktop-File-Install-Version=0.22
    dest: "{{ ansible_user_home_dir }}/.config/autostart/guake.desktop"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: '0664'
