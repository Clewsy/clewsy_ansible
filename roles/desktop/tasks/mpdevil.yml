---
#- name: '[mpdevil] Load mpdevil variables.'
#  include_vars: mpdevil_vars.yml

- name: '[mpdevil] Ensure flatpak is installed.'
  apt:
    name: flatpak
    state: latest

- name: '[mpdevil] Ensure the flathub flatpak repository remote is added.'
  flatpak_remote:
    name: flathub
    state: present
    flatpakrepo_url: https://dl.flathub.org/repo/flathub.flatpakrepo

- name: '[mpdevil] Install mpdevil.'
  flatpak:
    name: org.mpdevil.mpdevil
    state: present
    method: system

- name: '[mpdevil] Create alias mpdevil for "flatpak run org.mpdevil.mpdevil".'
  lineinfile:
    path: "{{ ansible_user_home_dir }}/.bash_aliases"
    line: "alias mpdevil='flatpak run org.mpdevil.mpdevil'" 
    state: present

# For future reference if you want to use ansible to configure mpdevil settings,
# keyfile is located at ~/.var/app/org.mpdevil.mpdevil/config/glib-2.0/settings/keyfile
