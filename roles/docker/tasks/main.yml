---
- name: Install packages for docker.
  apt:
    name: "{{ docker_packages }}"
    state: latest
  register: docker_not_installed
  notify: Enable and start docker service. 

- name: Add user to docker group.
  user:
    name: "{{ ansible_user }}"
    groups: docker
    append: yes

- name: Create docker-compose staging area.
  file:
    path: "{{ docker_home_dir }}"
    state: directory
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: u=rwx,g=rx,o=rx

- name: Create alias dc for docker-compose.
  lineinfile:
    path: "{{ ansible_user_home_dir }}/.bash_aliases"
    line: "alias dc='docker-compose'" 
    state: present
    insertafter: EOF

