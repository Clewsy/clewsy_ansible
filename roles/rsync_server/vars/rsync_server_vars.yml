---
rsync_server_packages:
  - rsync

rsync_server_logdir: "/var/log/rsync_server"
rsync_server_logfile: "{{ rsync_server_logdir }}/rsync_server.log"

rsync_server_rsync_job: 'rsync --verbose --archive --delete --acls --human-readable --progress --log-file={{ rsync_server_logfile }} -e "ssh -o StrictHostKeyChecking=no" {{ item.source }} {{ item.dest }}'

rsync_server_manual_backup_scripts_dir: "{{ ansible_user_home_dir }}/bin/rsync_server"
rsync_server_manual_backup_script: |
  #!/bin/bash
  # Manual rsync backup script generated by ansible.
  {{ rsync_server_rsync_job }}

rsync_server_logrotate_file: |
  {{ rsync_server_logfile }} {
  	su {{ ansible_user }} {{ ansible_user }}
  	weekly
  	rotate 12
  	compress
  	delaycompress
  	missingok
  	notifempty
  	create 644 {{ ansible_user }} {{ ansible_user }}
  }
  