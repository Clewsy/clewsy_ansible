---
- name: Install terminator.
  apt:
    name: terminator
    state: latest
    update_cache: yes

- name: Copy terminator configuration file.
  copy:
    src: "{{ cache_root }}{{ host_name }}/home/{{ ansible_user }}/.config/terminator/config"
    dest: "/home/{{ ansible_user }}/.config/terminator/config"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: 0664

- name: Ensure autostart directory exists.
  file:
    dest: "/home/{{ ansible_user }}/.config/autostart"
    mode: 0755
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    state: directory

- name: Create autostart entry.
  copy:
    content: |
      [Desktop Entry]
      Name=Terminator
      Comment=Multiple terminals in one window.  Autostart config generated by ansible.
      TryExec=terminator
      Exec=terminator
      Icon=terminator
      Type=Application
      Categories=GNOME;GTK;Utility;TerminalEmulator;System;
      StartupNotify=true
      X-Ubuntu-Gettext-Domain=terminator
      X-Ayatana-Desktop-Shortcuts=NewWindow;
      Keywords=terminal;shell;prompt;command;commandline;
      [NewWindow Shortcut Group]
      Name=Open a New Window
      Exec=terminator
      TargetEnvironment=Unity
    dest: "/home/{{ ansible_user }}/.config/autostart/terminator.desktop"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: 0664

